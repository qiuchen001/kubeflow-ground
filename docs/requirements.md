# 项目需求分析

## 项目背景与目标
- 提供可视化 Pipeline 画布，支持组件拖拽、连线、参数与资源配置、保存与再次编辑
- 集成 Kubeflow Pipelines（KFP），支持提交运行、查看整体状态与各节点运行状态
- 管理组件库，统一组件的镜像、命令/参数、输入输出与默认资源
- 管理 Pipeline 列表，包含创建、编辑、删除、运行、查看状态

## 用户角色与使用场景
- 开发者：定义组件并沉淀为可复用模块
- 流水线设计者：在画布上搭建与调整 Pipeline，提交到 KFP，查看运行与诊断

## 功能需求
- 组件管理
  - 新增/编辑/删除组件
  - 设置镜像、命令、参数、输入输出
  - 设置默认资源（CPU/内存/GPU）
- Pipeline 画布
  - 拖拽组件生成节点，支持输入输出连线
  - 节点参数编辑与资源覆盖（覆盖组件默认值）
  - 保存 Pipeline，支持再次编辑与画布还原
- 运行与状态
  - 提交运行，记录并展示 `run_id`
  - 查询 Pipeline 整体状态（running/succeeded/failed/...）
  - 查询各任务节点的状态并映射到画布节点展示
- 列表页管理
  - 显示管道名称与最后运行状态
  - 支持删除、进入编辑页

## 非功能需求
- 兼容性
  - KFP v1/v2 运行状态与节点状态解析需兼容多版本对象结构与 REST 回退
- 易用性
  - 拖拽与连接体验流畅；状态颜色与徽标清晰可辨
- 可维护性
  - 模型与接口清晰；序列化与反序列化稳定；日志与错误处理简洁
- 安全性
  - 不暴露敏感信息；跨域访问受控；避免在仓库中记录密钥

## 约束与假设
- 存储采用本地文件系统 JSON（`data/components`、`data/pipelines`）
- KFP 端点与 `PIPELINE_ROOT` 通过环境变量配置，默认 `http://localhost:30088`
- 组件默认资源可被节点覆盖；节点级 GPU 覆盖暂未在 UI 暴露（后端支持组件默认 GPU）

## 风险与后续优化
- 节点 `id` 命名依赖解析正则，可改为 UUID 提升唯一性
- 节点级 GPU 覆盖在 UI 补齐；支持 GPU 类型选择
- 列表与编辑页增加状态自动刷新（轮询/订阅）
- Pipeline 导入/导出与版本管理
- 组件参数的类型校验与更丰富输入类型支持

## 验收标准
- 组件可创建、编辑、删除，资源配置持久化
- Pipeline 可在画布搭建、保存、再次编辑并还原
- 可提交运行并正确显示 Pipeline 状态与各节点状态
- KFP v1/v2 环境下状态查询稳定（必要时 REST 回退）

